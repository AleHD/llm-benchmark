container: nemo

user: ctianche

max_minutes_per_run: 20 # minutes per run for the grid search.

env_vars:
#   NCCL_TOPO_FILE: null # Should be a path to an XML file describing the topology
#   UCX_IB_PCI_RELAXED_ORDERING: null # Needed to improve Azure performance
#   NCCL_IB_PCI_RELAXED_ORDERING: null # Needed to improve Azure performance
#   NCCL_IB_TIMEOUT: null # InfiniBand Verbs Timeout. Set to 22 for Azure
  # NCCL_DEBUG: INFO # Logging level for NCCL. Set to "INFO" for debug information
#   NCCL_PROTO: null # Protocol NCCL will use. Set to "simple" for AWS
#   TRANSFORMERS_OFFLINE: 0
#   TORCH_NCCL_AVOID_RECORD_STREAMS: 1
#   NCCL_NVLS_ENABLE: 0
#   NVTE_DP_AMAX_REDUCE_INTERVAL: 0 # Diable FP8 AMAX reduction in the data-parallel domain
#   NVTE_ASYNC_AMAX_REDUCTION: 1 # Enable asynchronous FP8 AMAX reduction
#   NVTE_FUSED_ATTN: 0 # Disable cudnn FA until we've tested it more

# # GPU Mapping
# numa_mapping:
#   enable: True  # Set to False to disable all mapping (performance will suffer).
#   mode: unique_contiguous  # One of: all, single, single_unique, unique_interleaved or unique_contiguous.
#   scope: node  # Either node or socket.
#   cores: all_logical  # Either all_logical or single_logical.
#   balanced: True  # Whether to assing an equal number of physical cores to each process.
#   min_cores: 1  # Minimum number of physical cores per process.
#   max_cores: 8  # Maximum number of physical cores per process. Can be null to use all available cores.
